{% extends "user_profile/base.html" %}
{% load static %}
{% block nav %}
    {{ user.first_name }}
{% endblock %}
{% block title %}
writing by {{ object.author }}
{% endblock %}

{% block head %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.2.0/js/mdb.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.2.0/css/mdb.min.css" rel="stylesheet">
    <style>
    .NFh{
        border: solid 2px black;
    }
    </style>
{% endblock %}


{% block content %}
<div class="container-fluid">
    <h2 class="text-info">{{ object.title }} by {{ object.author }}</h2>

    <p>
        {{ object.text|safe }}
    </p>
    <br>
    {% if object.score == '0' %}

    <h1 class="text-center" style="color:rgb(149,23,104) ">این متن به زودی تصحیح می شود</h1>
    {% else %}
    <label>Score: {{ object.score }}</label>
<div id="result"></div>
    <table class="table table-striped" >
        <thead >
            <tr >
                <th ></th>
                <th >status</th>
                <th >score</th>

            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="label-success">Word Choice</td>
                <td>{{ object.wordchoice }}</td>
                <td>{{ object.wordchoicesc }}</td>
            </tr>
            <tr>
                <td class="label-danger">Organization and Development</td>
                <td>{{ object.oad }}</td>
                <td>{{ object.oadsc}}</td>
            </tr>
            <tr>
                <td class="label-default">Addressing Topic</td>
                <td>{{ object.adress }}</td>
                <td>{{ object.adresssc }}</td>
            </tr>
            <tr>
                <td class="label-info">Unity, Progression and Coherence</td>
                <td>{{ object.unity}}</td>
                <td>{{ object.unitysc }}</td>
            </tr>
            <tr>
                <td class="label-primary">Grammar</td>
                <td>{{ object.grammer }}</td>
                <td>{{ object.grammersc }}</td>
            </tr>
            <tr>
                <td class="label-warning">Vocabulary</td>
                <td>{{ object.vocab }}</td>
                <td>{{ object.vocabsc }}</td>
            </tr>
        </tbody>
    </table>
<form method="post" action="" class="form-horizontal">

    {% for field in form %}
               {% csrf_token %}
                <span>{{ field.errors }}</span>
                <label style="color: rgb(149,23,104)">{{ field.label_tag }}</label>
                <div class="">{{ field }}</div>
            <br>
        {% endfor %}
{#        <input type="text" class="form-control" name="username" placeholder="Email Address" required="" autofocus="" />#}
{#        <input type="password" class="form-control" name="password" placeholder="Password" required=""/>#}
        <br>
        <button class="btn btn-lg btn-primary" type="submit" style="background-color: rgb(149,23,104)">Edit</button>

</form>
    <div style="height: 50rem">
        <canvas id="myChart" height="50rem"></canvas>
    </div>
    {% endif %}
</div>





<script>

$(function () {
    var option = {
    responsive: true,
    };

var data = [
    {
        value: {{ object.wordchoicesc }},
        color:"rgb(92, 184, 92)",
        highlight: "#FF5A5E",
        label: "Word Choice"
    },{
        value: {{ object.oadsc }},
        color:"rgb(217, 83, 79)",
        highlight: "#FF5A5E",
        label: "Organization and Development"
    },{
        value: {{ object.adresssc }},
        color:"rgb(119, 119, 119)",
        highlight: "#FF5A5E",
        label: "Addressing Topic"
    },{
        value: {{ object.unitysc }},
        color:"rgb(91, 192, 222)",
        highlight: "#FF5A5E",
        label: "Unity, Progression and Coherence"
    },
    {
        value: {{ object.grammersc }},
        color: "rgb(51, 122, 183)",
        highlight: "#FF5A5E",
        label: "Grammar"
    },
    {
        value: {{ object.vocabsc }},
        color: "rgb(240, 173, 78)",
        highlight: "#FF5A5E",
        label: "Vocabulary"
    }
]

    // Get the context of the canvas element we want to select
    var ctx = document.getElementById("myChart").getContext('2d');
    var myLineChart = new Chart(ctx).Pie(data, option); //'Line' defines type of the chart.
});

</script>


    <script>

    $(document).ready(function(){
    $("span").hover(function(){
        $(this).attr('data-toggle','tooltip');
        var color = $( this ).css( "background-color" );
        if ($(this).css('background-color') == 'rgb(255, 0, 0)'){
            $(this).attr('title','word choice');
            $( "#result" ).html( "You have a <span style='color:" +
    color + ";'>" + "word choice" + "</span> problem here." );
        }
        else if ($(this).css('background-color') == 'rgb(0, 128, 0)'){
            $(this).attr('title','vocabulary');
            $( "#result" ).html( "You have a <span style='color:" +
    color + ";'>" + "vocabulary" + "</span> problem here." );
        }
        else if ($(this).css('background-color') == 'rgb(153, 51, 0)'){
            $(this).attr('title','grammar');
            $( "#result" ).html( "You have a <span style='color:" +
    color + ";'>" + "grammar" + "</span> problem here." );
        }
        else if ($(this).css('background-color') == 'rgb(0, 204, 255)'){
            $(this).attr('title','organization');
            $( "#result" ).html( "You have a <span style='color:" +
    color + ";'>" + "organization" + "</span> problem here." );
        }

    });
     $("span").mouseout(function(){
        $("#result").html("");
    });
     $('body').tooltip({
        selector: '[data-toggle="tooltip"]'
    });
});
</script>
{% endblock %}